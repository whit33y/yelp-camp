<% layout('layouts/boilerplate')%>
    
    <div class="row">
        <div class="col-6">
            <div class="card">
                <img src="<%=campground.image%>" class="card-img-top" alt="...">
                <div class="card-body">
                  <h5 class="card-title"><%=campground.title%></h5>
                  <p class="card-text"><%=campground.description%></p>
                </div>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item text-muted"><%=campground.location%></li>
                  <li class="list-group-item">Submited by: <%=campground.author.username%></li>
                  <li class="list-group-item">Price - <%=campground.price%>$/night</li>
                </ul>
                <% if (currentUser&&campground.author.equals(currentUser._id)) { %>                
                <div class="card-body">
                  <a href="/campgrounds/<%=campground.id%>/edit" class="card-link btn btn-primary">Edit campground</a>
                  <form class="d-inline" action="/campgrounds/<%=campground.id%>?_method=DELETE" method="POST">
                    <button class="btn btn-danger">Delete</button>
                </form>
                </div>
                <% } %>
                <div class="card-footer text-muted">2 days ago</div>
              </div> 
        </div>
        <div class="col-6">
          <% if(currentUser){ %>
          <h3>Leave a review</h3>
            <form action="/campgrounds/<%=campground._id%>/reviews" class='mb-3 validated-form' method= "POST" novalidate>
              <div class="mb-3">
                <label for="rating">Rating</label>
                <input type="range" name='review[rating]' min='1' max='5' id='rating' class='form-range' value="5">
              </div>
              <div class="mb-3">
                <label for="reviewBody" class='form-label'>Review</label>
                <textarea name="review[body]" id="body" cols="30" rows="3" class='form-control' required></textarea>
                <div class="valid-feedback">
                  Looks good!
              </div>
              </div>
              <button class="btn btn-success">Submit</button>
            </form>
            <% }%>
            <% for(let review of campground.reviews) {%>
              <div class="card mb-3">
            <div class="card-body">
              <h5 class="card-title text-info" >Rating: <%=review.rating%></h5>
              <h6 class="card-subtittle mb-2 text-muted">By <%=review.author.username%></h6>
              <p class="card-text">Review: <%=review.body%></p>
              <% if (currentUser&&review.author.equals(currentUser._id)) { %>           
              <form action="/campgrounds/<%=campground._id%>/reviews/<%=review._id%>?_method=DELETE" method="POST">
                <button class="btn btn-sm btn-danger">Delete review</button>
              </form>
              <% } %>
            </div>
            </div>
            <% } %>
        </div>
    </div>
